<!DOCTYPE html>
<meta charset="utf-8">
<body>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script>

    var width = 960,
     height = 700;

    var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
	.append("g")
	.attr("transform","translate(200,200)");


	d3.csv("pl2012.csv", function(data){
		
		lines(data,["売上高","売上原価","売上総利益","当期純利益"]);
	})
        
		
	// Each column make line for x=index, y=value, in the same x axis.
	function lines(data,columns,interpolate="basic"){
		var line = d3.svg.line()
					.x(function(d,i){ return parseInt(i);})
					.y(function(d,i){ return parseInt(d);})
					.interpolate(interpolate);
		
		// Change color along with columns.
		var color = d3.scale.category10();
		
		// Make line chart from each column.
		d3.map(columns).forEach(function(i,col){
			
			// Value list of a column.				
			var data_list = [];
			d3.map(data).forEach(function(i,d){ data_list.push(d[col]); });
			
			svg.append("path")
			.attr("d",line(data_list))
			.attr("fill","none")
			.attr("stroke-width",1)
			.attr("opacity",0.4) //opacity makes duplication more visible.
			.attr("stroke",color(col));
		})
	}
	
  </script>